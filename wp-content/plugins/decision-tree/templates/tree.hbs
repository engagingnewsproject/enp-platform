<section id="cme-tree--{{{tree_id}}}" class="cme-tree cme-tree--{{{environment}}}">
    <svg style="visibility: hidden; position:absolute; height: 0; width: 0;"><symbol id="icon-arrow" viewBox="0 0 24 24"><title>arrow</title><path d="M20.744 12.669c0 0 0 0 0 0 0.006-0.006 0.006-0.006 0.006-0.006s0 0 0 0 0.006-0.006 0.006-0.006c0 0 0.006-0.006 0.006-0.006s0 0 0 0 0.006-0.006 0.006-0.006c0 0 0 0 0 0 0.063-0.075 0.112-0.156 0.15-0.244 0 0 0 0 0-0.006 0 0 0-0.006 0-0.006s0-0.006 0-0.006c0 0 0 0 0 0 0.038-0.094 0.063-0.194 0.069-0.3 0 0 0 0 0 0s0-0.006 0-0.006c0 0 0-0.006 0-0.006s0-0.006 0-0.006c0 0 0-0.006 0-0.006s0 0 0-0.006c0-0.025 0-0.050 0-0.075 0 0 0 0 0-0.006 0 0 0-0.006 0-0.006s0-0.006 0-0.006c0 0 0-0.006 0-0.006s0-0.006 0-0.006c0 0 0 0 0 0-0.006-0.106-0.031-0.206-0.069-0.3 0 0 0 0 0-0.006 0 0 0 0 0-0.006 0 0 0-0.006-0.006-0.006 0 0 0 0 0 0-0.038-0.094-0.094-0.175-0.156-0.256 0 0 0 0 0 0s-0.006-0.006-0.006-0.006c0 0 0 0 0 0s-0.006-0.006-0.006-0.006-0.006-0.006-0.006-0.006 0 0 0-0.006c-0.012-0.012-0.025-0.025-0.037-0.037l-6-6c-0.387-0.387-1.025-0.387-1.413 0s-0.387 1.025 0 1.413l4.294 4.294h-13.581c-0.55 0-1 0.45-1 1s0.45 1 1 1h13.587l-4.294 4.294c-0.387 0.387-0.387 1.025 0 1.413 0.194 0.194 0.45 0.294 0.706 0.294s0.513-0.1 0.706-0.294l5.994-5.994c0.019-0.025 0.031-0.044 0.044-0.056z"></path></symbol><symbol id="icon-arrow-turn" viewBox="0 0 24 24"><title>arrow</title><path d="M18.984 15l-6 6-1.406-1.406 3.609-3.609h-11.203v-12h2.016v10.031h9.188l-3.609-3.609 1.406-1.406z"></path></symbol></svg>
    <div class="cme-tree__intro-wrapper">
        <div id="cme-tree__intro--{{{tree_id}}}" class="cme-tree__intro">
            <h2 class="cme-tree__title cme-tree__title--tree">{{{title}}}</h2>
            <div class="cme-tree__stats">
                <ul class="cme-tree__stats-list">
                    <li class="cme-tree__stats-item">
                        <h3 class="cme-tree__title cme-tree__title--stats-item">Possible Paths</h3>
                        <div class="cme-tree__stat">{{{stats.total_paths}}}</div>
                    </li>
                    <li class="cme-tree__stats-item">
                        <h3 class="cme-tree__title cme-tree__title--stats-item">Longest Path</h3>
                        <div class="cme-tree__stat">{{{stats.longest_path}}}</div>
                    </li>

                    {{#each stats.path_ends}}
                        <li class="cme-tree__stats-item">
                            <h3 class="cme-tree__title cme-tree__title--stats-item">{{{title}}} Paths</h3>
                            <div class="cme-tree__stat">{{{percentage}}}%</div>
                        </li>
                    {{/each}}
                </ul>
            </div>
            {{#if starts}}
                <div class="cme-tree__start-container">
                    {{#each starts}}
                        <p><a id="cme-tree__el--{{start_id}}" class="cme-tree__btn cme-tree__start" href="#cme-tree__el--{{{destination_id}}}">{{{title}}}</a></p>
                        {{#if content}}
                            <div class="cme-tree__description cme-tree__description--start">
                                {{content}}
                            </div>
                        {{/if}}
                    {{/each}}
                </div>
            {{/if}}
        </div>
    </div>
    <div id="cme-tree__content-wrapper--{{{tree_id}}}" class="cme-tree__content-wrapper">
        <div id="cme-tree__content-window--{{{tree_id}}}" class="cme-tree__content-window">
            <div id="cme-tree__content-panel--{{{tree_id}}}" class="cme-tree__content-panel">
            {{#if questions}}
                <div class="cme-tree__questions">
                    {{#each questions}}
                        {{#if group_id}}
                            {{#group_start question_id group_id ../groups}}
                                <div id="cme-tree__el--{{{group_id}}}" class="cme-tree__group">
                                    <h3 class="cme-tree__title cme-tree__title--group">{{group_title}}</h3>
                            {{/group_start}}
                        {{/if}}
                        <section id="cme-tree__el--{{{question_id}}}" class="cme-tree__question" tabindex="-1">
                            <span class="cme-tree__el-number">{{el_number order}}</span>
                            <h4 class="cme-tree__title cme-tree__title--question">{{title}}</h4>
                            {{#if content}}
                                <div class="cme-tree__description cme-tree__description--question">{{content}}</div>
                            {{/if}}
                            {{#if options}}
                                <ul class="cme-tree__options">
                                    {{#each options}}
                                        <li class="cme-tree__option"><a  class="cme-tree__option-link" id="cme-tree__el--{{{option_id}}}" href="#cme-tree__el--{{{destination_id}}}"
                                        aria-describedby="cme-tree__el--{{{question_id}}}">
                                            <span class="cme-tree__option-title">{{title}}</span>
                                            <span class="cme-tree__destination cme-tree__destination--{{{destination_type}}}">
                                                {{#destination destination_id destination_type option_id @../index}}
                                                    <span class="cme-tree__destination-title">{{{destination_title}}}</span>
                                                    {{#if destination_icon}}
                                                        <span class="cme-tree__icon-wrap"><svg id="cme-tree__destination-icon--{{{option_id}}}" class="cme-tree__icon cme-tree__icon--{{{destination_icon}}}"><use xlink:href="#icon-{{{destination_icon}}}"></use></svg></span>
                                                    {{/if}}
                                                {{/destination}}
                                            </span></a></li>
                                    {{/each}}
                                </ul>
                            {{/if}}
                        </section>

                        {{#if group_id}}
                            {{#group_end question_id group_id ../groups}}
                                </div>
                            {{/group_end}}
                        {{/if}}
                    {{/each}}
                </div>
            {{/if}}

            {{#if ends}}
                <div class="cme-tree__ends">
                    {{#each ends}}

                        <section id="cme-tree__el--{{{end_id}}}" class="cme-tree__end" tabindex="-1">
                            <h3 class="cme-tree__title cme-tree__title--end">{{{title}}}</h3>
                            {{#if content}}
                                <div class="cme-tree__description cme-tree__description--end">{{content}}</div>
                            {{/if}}

                            <ul class="cme-tree__end-options">
                                <li class="cme-tree__end-option">
                                    <a id="cme-tree__restart--{{end_id}}" class="cme-tree__btn cme-tree__btn--retry" href="#cme-tree__el--{{{../questions.0.question_id}}}">Start Again</a>
                                </li>
                                <li class="cme-tree__end-option">
                                    <a id="cme-tree__overview--{{end_id}}" class="cme-tree__btn cme-tree__btn--overview" href="#cme-tree--{{{../tree_id}}}">Go to Overview</a>
                                </li>
                            </ul>
                        </section>
                    {{/each}}
                </div>
            {{/if}}
        </div>
    </div>

</section>
