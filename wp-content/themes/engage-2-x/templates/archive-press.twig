{# 
    Archive template for Press articles
    
    This template displays a grid of press articles with their details including:
    - Title (with optional external link)
    - Publisher information
    - Publication date
    
    Available variables:
    - title: The archive title (e.g., "Press Archive", "Press Archive: March 2024")
    - posts: Array of PressArticle objects
    - debug: Debug information (if enabled)
#}
{% extends "base.twig" %}

{% block content %}
	{# Main press archive section #}

	{% set categories = get_terms({
			'taxonomy': 'press-categories',
			'hide_empty': true
		}) %}

	<section
		class="archive-press">
		{# Archive header with title #}
		<div class="archive-header">
			<h1 class="archive-title">
				{% if function('is_tax', 'press-categories') %}
					<a href="/press">Press</a>
					-
					{{ function('single_term_title', '') }}
				{% else %}
					{{ title }}
				{% endif %}
			</h1>
		</div>

		{# output the categories #}
		<div class="press-categories">
			{% for category in categories %}
				<a href="{{ category.link }}">{{ category.title }}</a>
				{% if category.count > 1 %}
					({{ category.count }})
				{% endif %}
				{% if not loop.last %}
					|
				{% endif %}
			{% endfor %}
		</div>

		{# Check if we have any press articles to display #}
		{% if posts %}
			{# Grid container for press articles #}
			<div class="press-articles-grid">
				{# Loop through each press article #}
				{% for post in posts %}
					<article class="press-article-card">
						<div class="press-content">
							{# Display publisher information if available #}
							{% if post.getPressArticlePublisher() %}
								<div class="press-publisher">
									{{ post.getPressArticlePublisher() }}
								</div>
							{% endif %}
							
							{# Article title with optional external link #}
							<p class="press-title">
								{% if post.getPressArticleUrl() %}
									{# If URL exists, create external link with security attributes #}
									<a href="{{ post.getPressArticleUrl() }}" target="_blank" rel="noopener noreferrer">{{ post.title }}</a>
								{% else %}
									{# If no URL, display title as plain text #}
									{{ post.title }}
								{% endif %}
							</p>


							{# Article metadata section #}
							<div class="press-meta">
								{# Display publication date if available, formatted as "Month Day, Year" #}
								{% if post.getPressArticlePublicationDate() %}
									<div class="press-publication-date">
										{{ post.getPressArticlePublicationDate()|date('F j, Y', 'UTC') }}
									</div>
								{% elseif post.getPressArticlePublicationDateOtherTxt() %}
									<div class="press-publication-date">
										{{ post.getPressArticlePublicationDateOtherTxt() }}
									</div>
								{% endif %}
							</div>
						</div>
					</article>
				{% endfor %}
			</div>

		{% else %}
			{# Display message if no press articles are found #}
			<p class="no-press-articles">No press articles found.</p>
		{% endif %}
	</section>
{% endblock %} 