/**
 * Enhance footnote links with proper accessibility attributes
 * 
 * This component adds accessibility improvements to footnotes generated by
 * the Footnotes Made Easy plugin (https://divibanks.io/wordpress-plugins/footnotes-made-easy/).
 * It adds appropriate aria-labels to footnote links that open in new tabs to meet WCAG requirements.
 */
const enhanceFootnoteAccessibility = () => {
    // Handle footnote reference links (the ones in the content that point to footnotes)
    document.querySelectorAll('.footnote').forEach(footnote => {
        const link = footnote.querySelector('a');
        if (link && link.getAttribute('target') === '_blank') {
            // Add aria-label to inform screen readers this opens in new tab
            const existingText = link.textContent || '';
            link.setAttribute('aria-label', `${existingText} (opens in new tab)`);
        }
    });

    // Handle footnote back links (the ones at bottom that point back to content)
    document.querySelectorAll('.footnote-back-link-wrapper a').forEach(backlink => {
        if (backlink.getAttribute('target') === '_blank') {
            backlink.setAttribute('aria-label', 'Return to content (opens in new tab)');
        }
    });
};

// Run enhancement when DOM is ready
document.addEventListener('DOMContentLoaded', enhanceFootnoteAccessibility);

// Export for use in app.js
module.exports = enhanceFootnoteAccessibility; 